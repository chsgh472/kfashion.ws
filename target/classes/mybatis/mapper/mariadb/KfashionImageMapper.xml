<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="io.aetherit.kfashion.ws.repository.mapper.KfashionImageMapper">
    <resultMap id="kfashionImageResultMap" type="KfashionImage">
        <id property="workNo"                       column="work_no" />
        <result property="imgData"             column="img_data" />
        <result property="createdId"             column="created_id" />
        <result property="createdDatetime"      column="created_datetime" />
        <result property="updatedDatetime"      column="updated_datetime" />
    </resultMap>

    <insert id="insertImgUpload" parameterType="KfashionImage">
     INSERT
     INTO kfashion_image (
     work_no,
     img_data,
     created_datetime,
     updated_datetime
     ) VALUES (
     #{workNo},
     #{imgData},
      NOW(),
      NOW()
      )
    </insert>

    <select id="selectBoundaryList" resultMap="kfashionImageResultMap" parameterType="String">
        SELECT
        kfashion_image.work_no,
        kfashion_work.work_name,
        kfashion_work_history.created_id
        FROM kfashion_image
        LEFT JOIN kfashion_work_history on kfashion_image.work_no = kfashion_work_history.work_no
        RIGHT JOIN kfashion_work ON kfashion_image.work_no = kfashion_work.no
        WHERE kfashion_work_history.created_id = #{createdId};
    </select>

    <select id="getByteImage" parameterType="int" resultType="java.util.Map">
        SELECT img_data
        FROM kfashion_image
        WHERE work_no = #{workNo}
    </select>


</mapper>
