{"ast":null,"code":"import _classCallCheck from\"/Users/jangseong-yeol/kfashion.ws/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jangseong-yeol/kfashion.ws/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/jangseong-yeol/kfashion.ws/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/jangseong-yeol/kfashion.ws/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jangseong-yeol/kfashion.ws/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";var _dec,_class;import React from\"react\";import{BrowserRouter as Router,Route,Switch}from\"react-router-dom\";import{inject,observer}from\"mobx-react\";import{withStyles}from\"@material-ui/core/styles\";import{CssBaseline}from\"@material-ui/core\";import axios from\"axios\";import TopBar from\"./components/TopBar\";import SideMenu from\"./components/SideMenu\";import ScrollToTop from\"./components/ScrollToTop\";import Home from\"./views/Home\";import Step from\"./views/Step\";import Step2 from\"./views/Step2\";import Step3 from\"./views/Step3\";import BoundaryBox from\"./views/Labeling/BoundaryBox\";import Segmentation from\"./views/Labeling/Segmentaion\";import Polygon from\"./views/Labeling/Polygon\";import SignIn from\"./views/SignIn\";import*as store from\"./stores/AuthStore\";var style=function style(){return{root:{display:'flex'}};};var App=(_dec=inject('authStore'),_dec(_class=observer(_class=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.state={mobileOpen:false};_this.setMobileOpen=_this.setMobileOpen.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var axiosRequestInterceptors=function axiosRequestInterceptors(config){var token=localStorage.getItem(store.LocalStorageTokenKey);if(token){config.headers['X-Auth-Token']=token;}return config;};var axiosRequestErrorHandler=function axiosRequestErrorHandler(error){return Promise.reject(error);};var axiosResponseInterceptor=function axiosResponseInterceptor(response){if(response.status===403){_this2.props.authStore.invalidateLogin();}return response;};var axiosResponseErrorHandler=function axiosResponseErrorHandler(error){if(error.response&&error.response.status===403){_this2.props.authStore.invalidateLogin();}return Promise.reject(error);};console.log(\"========== RGate App componentDidMount ==========\");axios.interceptors.request.use(axiosRequestInterceptors,axiosRequestErrorHandler);axios.interceptors.response.use(axiosResponseInterceptor,axiosResponseErrorHandler);this.props.authStore.checkLogin();}},{key:\"setMobileOpen\",value:function setMobileOpen(mobileOpen){this.setState({mobileOpen:mobileOpen});}},{key:\"render\",value:function render(){var _this3=this;var classes=this.props.classes;var loginState=this.props.authStore.loginState;return/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(CssBaseline,null),/*#__PURE__*/React.createElement(Route,{path:\"/\",component:ScrollToTop},/*#__PURE__*/React.createElement(TopBar,{mobileOpen:this.state.mobileOpen,setMobileOpen:this.setMobileOpen,isLoggedIn:loginState===store.State.Authenticated,doLogout:function doLogout(){return _this3.props.authStore.doLogout();}}),/*#__PURE__*/React.createElement(SideMenu,{mobileOpen:this.state.mobileOpen,setMobileOpen:this.setMobileOpen,isLoggedIn:loginState===store.State.Authenticated}),loginState===store.State.Authenticated?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\",component:Home}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/home\",component:Home}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/step\",component:Step}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/step2\",component:Step2}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/step3\",component:Step3}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/Step/BoundaryBox\",component:BoundaryBox}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/Step/Segmentation\",component:Segmentation}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/Step/Polygon\",component:Polygon}))):/*#__PURE__*/React.createElement(Route,{path:\"/\",component:SignIn}))));}}]);return App;}(React.Component))||_class)||_class);;export default withStyles(style)(App);","map":{"version":3,"sources":["/Users/jangseong-yeol/kfashion.ws/web/src/App.js"],"names":["React","BrowserRouter","Router","Route","Switch","inject","observer","withStyles","CssBaseline","axios","TopBar","SideMenu","ScrollToTop","Home","Step","Step2","Step3","BoundaryBox","Segmentation","Polygon","SignIn","store","style","root","display","App","props","state","mobileOpen","setMobileOpen","bind","axiosRequestInterceptors","config","token","localStorage","getItem","LocalStorageTokenKey","headers","axiosRequestErrorHandler","error","Promise","reject","axiosResponseInterceptor","response","status","authStore","invalidateLogin","axiosResponseErrorHandler","console","log","interceptors","request","use","checkLogin","setState","classes","loginState","State","Authenticated","doLogout","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {BrowserRouter as Router, Route, Switch} from \"react-router-dom\";\nimport {inject, observer} from \"mobx-react\";\n\nimport {withStyles} from \"@material-ui/core/styles\";\nimport {CssBaseline} from \"@material-ui/core\";\n\nimport axios from \"axios\";\n\nimport TopBar from \"./components/TopBar\";\nimport SideMenu from \"./components/SideMenu\";\nimport ScrollToTop from \"./components/ScrollToTop\";\nimport Home from \"./views/Home\";\nimport Step from \"./views/Step\";\nimport Step2 from \"./views/Step2\";\nimport Step3 from \"./views/Step3\";\nimport BoundaryBox from \"./views/Labeling/BoundaryBox\";\nimport Segmentation from \"./views/Labeling/Segmentaion\";\nimport Polygon from \"./views/Labeling/Polygon\";\nimport SignIn from \"./views/SignIn\";\nimport * as store from \"./stores/AuthStore\";\n\n\nconst style = () => ({\n    root: {\n        display: 'flex',\n    }\n});\n\n\n@inject('authStore')\n@observer\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            mobileOpen: false,\n        };\n\n        this.setMobileOpen = this.setMobileOpen.bind(this);\n    }\n\n    componentDidMount() {\n        const axiosRequestInterceptors = (config) => {\n            const token = localStorage.getItem(store.LocalStorageTokenKey);\n\n            if(token) {\n                config.headers['X-Auth-Token'] = token;\n            }\n\n            return config;\n        };\n\n        const axiosRequestErrorHandler = (error) => {\n            return Promise.reject(error);\n        };\n\n        const axiosResponseInterceptor = (response) => {\n            if(response.status === 403) {\n                this.props.authStore.invalidateLogin();\n            }\n\n            return response;\n        };\n\n        const axiosResponseErrorHandler = (error) => {\n            if((error.response) && (error.response.status === 403)) {\n                this.props.authStore.invalidateLogin();\n            }\n\n            return Promise.reject(error);\n        };\n\n        console.log(\"========== RGate App componentDidMount ==========\");\n        axios.interceptors.request.use(axiosRequestInterceptors, axiosRequestErrorHandler);\n        axios.interceptors.response.use(axiosResponseInterceptor, axiosResponseErrorHandler);\n\n        this.props.authStore.checkLogin();\n    }\n\n    setMobileOpen(mobileOpen) {\n        this.setState({mobileOpen: mobileOpen});\n    }\n\n    render() {\n        const { classes } = this.props;\n        const { loginState } = this.props.authStore;\n\n        return (\n            <div className={classes.root}>\n                <Router>\n                    <CssBaseline />\n\n                    <Route path=\"/\" component={ScrollToTop}>\n                        <TopBar mobileOpen={this.state.mobileOpen}\n                                setMobileOpen={this.setMobileOpen}\n                                isLoggedIn={loginState === store.State.Authenticated}\n                                doLogout={() => this.props.authStore.doLogout()} />\n                        <SideMenu mobileOpen={this.state.mobileOpen}\n                                  setMobileOpen={this.setMobileOpen}\n                                  isLoggedIn={loginState === store.State.Authenticated} />\n\n                        {loginState === store.State.Authenticated ? (\n                            <React.Fragment>\n                              <Switch>\n                                <Route exact path=\"/\" component={Home} />\n                                <Route exact path=\"/home\" component={Home} />\n                                  <Route exact path=\"/step\" component={Step} />\n                                  <Route exact path=\"/step2\" component={Step2} />\n                                  <Route exact path=\"/step3\" component={Step3} />\n                                  <Route exact path=\"/Step/BoundaryBox\" component={BoundaryBox} />\n                                  <Route exact path=\"/Step/Segmentation\" component={Segmentation} />\n                                  <Route exact path=\"/Step/Polygon\" component={Polygon} />\n                              </Switch>\n                            </React.Fragment>\n                        ) : (\n                            <Route path=\"/\" component={SignIn} />\n                        )}\n                  </Route>\n                </Router>\n            </div>\n        );\n    }\n};\n\nexport default withStyles(style) (App);\n"]},"metadata":{},"sourceType":"module"}